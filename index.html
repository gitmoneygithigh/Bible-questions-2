<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Біблійні вірші</title>
    <link rel="icon" href="book.png">
    <style>
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            font-family: Arial, sans-serif;
            margin: auto;
            height: 100vh;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            justify-self: center;
        }
        #game-div {
            top: 0px;
            /* border: 2px solid red; */
            position: absolute;
            width: 100vw;
            max-width: 800px;
            height: 100vh;
        }
        #movable-div {
            bottom: 0px;
            position: absolute;
            width: 100px;
            height: 26px;
            background-color: red;
        }
        #bible-container {
            max-width: 800px;
        }
        .question-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            padding: 20px;
        }
        .question {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .answer {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-left: 4px solid #3498db;
        }
        .answer a {
            color: #2980b9;
            text-decoration: none;
        }
        .answer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <script>
        document.addEventListener("DOMContentLoaded", function() {            
            const movableDiv = document.getElementById('movable-div');
            const gameDivWidth = document.getElementById('game-div').offsetWidth;
            const movableDivWidth = document.getElementById('movable-div').offsetWidth;
            movableDiv.style.backgroundColor = 'grey';
            var globalID;
            var stepSize = 2;
            var shift = 0;
            var shiftDirection = 1;
            var moving = false;
            var maxPosition = gameDivWidth - movableDivWidth;
            var rightKeyPressed = false;
            var rightKeyUnPressed = true;
            var leftKeyPressed = false;
            var leftKeyUnPressed = true;
            var rightPressedID = 0;
            var rightUnPressedID;
            var leftPressedID = 0;
            var leftUnPressedID;
            function showInfo() {
                console.log(globalID + " is globalID");
                console.log(shift + " is shift");
                console.log(shiftDirection + " is shiftDirection");
                console.log(moving + " is moving");
                console.log(rightKeyPressed + " is rightKeyPressed");
                console.log(leftKeyPressed + " is leftKeyPressed");
                console.log(rightKeyUnPressed + " is rightKeyUnPressed");
                console.log(leftKeyUnPressed + " is leftKeyUnPressed");
                console.log(rightPressedID + " is rightPressedID");
                console.log(leftPressedID + " is leftPressedID");
                console.log(leftUnPressedID + " is leftUnPressedID");
                console.log(rightUnPressedID + " is rightUnPressedID");
                console.log(" ");
            }
            shift = 350;
            movableDiv.style.transform = `translateX(${shift}px)`;
            function step() {
                if (shiftDirection === 1) {
                    shift += stepSize;
                    if (shift > maxPosition - stepSize) {
                        shift = maxPosition;
                        cancelAnimationFrame(globalID);
                        moving = false;
                        console.log('right edge');
                        return;
                    }
                } else if (shiftDirection === -1) {
                    shift -= stepSize;
                    if (shift < stepSize) {
                        shift = 0;
                        cancelAnimationFrame(globalID);
                        moving = false;
                        console.log('left edge');
                        return;
                    }
                }
                if (rightKeyUnPressed && leftKeyUnPressed) {
                    if (!rightKeyPressed && !leftKeyPressed) {
                        cancelAnimationFrame(globalID);
                        moving = false;
                        console.log('stopped because no keys pressed');
                        showInfo();
                        return;
                    }
                }
                movableDiv.style.transform = `translateX(${shift}px)`;
                globalID = requestAnimationFrame(step);
            }
            document.addEventListener('keyup', function(event) {
                if (event.key === "ArrowRight" || event.key === "ArrowLeft") {
                    if (event.key === "ArrowRight") {
                        rightKeyPressed = false;
                        rightKeyUnPressed = true;
                        rightUnPressedID = globalID;
                    } else if (event.key === "ArrowLeft") {
                        leftKeyPressed = false;
                        leftKeyUnPressed = true;
                        leftUnPressedID = globalID;
                    }
                    if (rightUnPressedID < leftUnPressedID) {
                        cancelAnimationFrame(globalID);
                        shiftDirection = 1;
                        leftUnPressedID = requestAnimationFrame(step);
                        console.log('changed direction to the right');
                        showInfo();
                    } else if (leftUnPressedID < rightUnPressedID) {
                        cancelAnimationFrame(globalID);
                        shiftDirection = -1;
                        rightUnPressedID = requestAnimationFrame(step);;
                        console.log('changed direction to the left');
                        showInfo();
                    }
                }
            });
            document.addEventListener('keydown', function(event) {
                if (event.key === "ArrowRight" || event.key === "ArrowLeft") {
                    if (leftKeyPressed && event.key === "ArrowRight") {
                        rightPressedID = globalID;
                        rightKeyUnPressed = false;
                        rightKeyPressed = true;
                        if (rightPressedID > leftPressedID) {
                            cancelAnimationFrame(globalID);
                            shiftDirection = 1;
                            leftPressedID = requestAnimationFrame(step);
                            console.log('changed direction to the right');
                            showInfo();
                        } else if (leftPressedID > rightPressedID) {
                            cancelAnimationFrame(globalID);
                            shiftDirection = -1;
                            rightPressedID = requestAnimationFrame(step);;
                            console.log('changed direction to the left');
                            showInfo();
                        }
                    } else if (rightKeyPressed && event.key === "ArrowLeft") {
                        leftPressedID = globalID;
                        leftKeyUnPressed = false;
                        leftKeyPressed = true;
                        if (rightPressedID > leftPressedID) {
                            cancelAnimationFrame(globalID);
                            shiftDirection = 1;
                            leftPressedID = requestAnimationFrame(step);
                            console.log('changed direction to the right');
                            showInfo();
                        } else if (leftPressedID > rightPressedID) {
                            cancelAnimationFrame(globalID);
                            shiftDirection = -1;
                            rightPressedID = requestAnimationFrame(step);;
                            console.log('changed direction to the left');
                            showInfo();
                        }
                    }
                    if (event.key === "ArrowRight" && !rightKeyPressed) {
                        rightKeyUnPressed = false;
                        rightKeyPressed = true;
                        shiftDirection = 1;
                        if (rightPressedID === 0) {
                            rightPressedID = 1;
                        } else {
                            rightPressedID = globalID;
                        }
                        console.log('right keydown');
                    } else if (event.key === "ArrowLeft" && !leftKeyPressed) {
                        leftKeyPressed = true;
                        leftKeyUnPressed = false;
                        shiftDirection = -1;
                        if (leftPressedID === 0) {
                            leftPressedID = 1;
                        } else {
                            leftPressedID = globalID;
                        }
                        console.log('left keydown');
                    }
                    if (!moving) {
                        if (event.key === "ArrowRight") {
                            rightKeyPressed = true;
                            rightKeyUnPressed = false;
                            shiftDirection = 1;
                        } else if (event.key === "ArrowLeft") {
                            leftKeyPressed = true;
                            leftKeyUnPressed = false;
                            shiftDirection = -1;
                        }
                        if (shift <= 0 && shiftDirection === -1) {
                            return;
                        } else if (shift >= maxPosition && shiftDirection === 1) {
                            return;
                        } else {
                            moving = true;
                            globalID = requestAnimationFrame(step);
                            console.log('started on keydown');
                        }
                        showInfo();
                    }
                }
            });
        });
    </script>
    <div id="bible-container">
    <div class="question-container">
        <div class="question">Чому ти не на війні?</div>
        <div class="answer">
            Не вбивай. (<a href="https://www.biblegateway.com/bible?passage=Exodus+20:13&version=UKR">Вихід 20:13</a>)
        </div>
        <div class="answer">
            "...хто візьме меча, від меча і загинуть." (<a href="https://www.biblegateway.com/bible?passage=Matthew+26:52&version=UKR">Матвія 26:52</a>)
        </div>
        <div class="answer">
            "І як бажаєте, щоб вам люди чинили, так само чиніть їм і ви." (<a href="https://www.biblegateway.com/bible?passage=Luke+6:31&version=UKR">Луки 6:31</a>)
        </div>
    </div>

    <div class="question-container">
        <div class="question">Хто тоді повинен воювати?</div>
        <div class="answer">
            "Мені помста належить, Я відплачу, говорить Господь." (<a href="https://www.biblegateway.com/bible?passage=Romans+12:19&version=UKR">Римлян 12:19</a>)
        </div>
        <div class="answer">
            "... І мечі свої перекують вони на лемеші, а списи свої на серпи. Не підійме меча народ проти народу, і більше не будуть навчатись війни!" (<a href="https://www.biblegateway.com/bible?passage=Isaiah+2:4&version=UKR">Ісаї 2:4</a>)
        </div>
    </div>
    <div class="question-container">
        <div class="question">А що тоді робити?</div>
        <div class="answer">
            "А от коли ви побачите Єрусалим, оточений військами, тоді знайте, що час його спустошення наближається. Всі ті, хто лишатимуться в Юдеї, змушені будуть рятувати життя, тікаючи в гори" (<a href="https://www.biblegateway.com/bible?passage=Luke+21:20-21&version=UKR">Луки 21:20,21</a>)
        </div>
    </div></div>
    <div id="game-div">
        <div id="movable-div"></div>
    </div>
</body>
</html>
